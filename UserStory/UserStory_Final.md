# 图书馆座位预约管理系统 - 用户故事

## 系统概述

本图书馆座位预约管理系统基于Django开发，为学生、教师和管理员提供便捷的自习室预约服务。系统支持多用户角色管理、实时预约状态查看、管理员审核等功能。

## 用户角色

### 👨‍🎓 学生用户 (Student)
- 学号识别
- 基础预约权限
- 查看个人预约记录

### 👨‍🏫 教师用户 (Teacher)  
- 工号识别
- 预约权限
- 可能享有优先预约权

### 👨‍💼 管理员用户 (Admin)
- 系统管理权限
- 预约审核权限
- 数据统计查看

---

## 用户故事

### 📝 用户注册与登录

#### 故事1：新用户注册
**作为** 一名新学生  
**我希望** 能够注册一个账户  
**以便** 使用图书馆预约系统  

**验收标准：**
- ✅ 我可以填写用户名、邮箱、密码
- ✅ 我可以选择用户类型（学生/教师）
- ✅ 我可以填写学号/工号和手机号
- ✅ 系统验证信息的有效性
- ✅ 注册成功后自动跳转到登录页面

#### 故事2：用户登录
**作为** 已注册用户  
**我希望** 能够登录系统  
**以便** 访问预约功能  

**验收标准：**
- ✅ 我可以使用用户名和密码登录
- ✅ 登录成功后跳转到主页
- ✅ 登录失败显示错误提示
- ✅ 系统记住我的登录状态

---

### 🏢 浏览自习室信息

#### 故事3：查看自习室列表
**作为** 用户  
**我希望** 能够浏览所有可用的自习室  
**以便** 了解各个自习室的基本信息  

**验收标准：**
- ✅ 我可以看到所有自习室的列表
- ✅ 每个自习室显示名称、位置、容量
- ✅ 我可以看到自习室的设备信息
- ✅ 我可以看到自习室的图片（如果有）
- ✅ 只显示启用状态的自习室

#### 故事4：查看自习室详细信息
**作为** 用户  
**我希望** 能够查看特定自习室的详细信息  
**以便** 做出更好的预约决策  

**验收标准：**
- ✅ 我可以点击自习室查看详情页面
- ✅ 我可以看到自习室的完整描述
- ✅ 我可以看到设备清单
- ✅ 我可以看到当前的预约状态
- ✅ 我可以直接从详情页发起预约

---

### 📅 预约管理

#### 故事5：创建新预约
**作为** 登录用户  
**我希望** 能够预约自习室  
**以便** 确保有学习场所  

**验收标准：**
- ✅ 我可以选择想要预约的自习室
- ✅ 我可以选择预约日期（不能选择过去的日期）
- ✅ 我可以选择时间段（上午第一节、下午第二节等）
- ✅ 我可以填写使用目的
- ✅ 我可以指定参与人数（不超过房间容量）
- ✅ 系统检查时间段是否已被预约
- ✅ 预约成功后显示确认信息
- ✅ 预约记录保存到个人预约列表

#### 故事6：查看个人预约列表
**作为** 用户  
**我希望** 能够查看我的所有预约记录  
**以便** 管理我的学习安排  

**验收标准：**
- ✅ 我可以看到我的所有预约记录
- ✅ 预约按时间倒序排列（最新的在前）
- ✅ 每个预约显示房间、日期、时间段、状态
- ✅ 我可以看到预约状态（待确认、已确认、已取消、已完成）
- ✅ 我可以看到预约统计信息
- ✅ 支持分页浏览

#### 故事7：查看预约详情
**作为** 用户  
**我希望** 能够查看特定预约的详细信息  
**以便** 了解预约的完整状态  

**验收标准：**
- ✅ 我可以点击预约查看详情
- ✅ 我可以看到预约的所有信息
- ✅ 我可以看到预约的历史操作记录
- ✅ 我可以看到操作时间和操作人
- ✅ 管理员可以查看所有用户的预约详情

#### 故事8：取消预约
**作为** 用户  
**我希望** 能够取消我的预约  
**以便** 在计划改变时释放座位资源  

**验收标准：**
- ✅ 我只能取消状态为"待确认"或"已确认"的预约
- ✅ 取消操作需要确认
- ✅ 取消后预约状态变为"已取消"
- ✅ 系统记录取消操作的历史
- ✅ 取消成功后显示确认消息

---

### 🔧 管理员功能

#### 故事9：管理员查看所有预约
**作为** 管理员  
**我希望** 能够查看所有用户的预约申请  
**以便** 进行统一管理  

**验收标准：**
- ✅ 我可以看到所有用户的预约列表
- ✅ 我可以按状态筛选预约（待审核、已确认等）
- ✅ 我可以搜索特定用户或房间的预约
- ✅ 预约信息包含用户信息、房间信息、时间信息
- ✅ 支持分页浏览（每页20条）

#### 故事10：审核预约申请
**作为** 管理员  
**我希望** 能够审核用户的预约申请  
**以便** 确保预约的有效性和合理性  

**验收标准：**
- ✅ 我可以批准待审核的预约申请
- ✅ 我可以拒绝不合理的预约申请
- ✅ 我可以在操作时添加备注说明
- ✅ 审核操作会记录到预约历史中
- ✅ 系统更新预约状态
- ✅ 操作后显示成功消息

#### 故事11：管理自习室信息
**作为** 管理员  
**我希望** 能够管理自习室的基本信息  
**以便** 保持系统信息的准确性  

**验收标准：**
- ✅ 我可以通过Django管理后台添加新自习室
- ✅ 我可以编辑现有自习室的信息
- ✅ 我可以上传自习室图片
- ✅ 我可以启用或禁用自习室
- ✅ 我可以设置自习室容量和设备信息

#### 故事12：管理时间段配置
**作为** 管理员  
**我希望** 能够配置可预约的时间段  
**以便** 适应不同的开放时间安排  

**验收标准：**
- ✅ 我可以添加新的时间段
- ✅ 我可以设置时间段的开始和结束时间
- ✅ 我可以启用或禁用特定时间段
- ✅ 系统验证时间段的合理性（结束时间晚于开始时间）
- ✅ 时间段按开始时间排序显示

---

### 📊 数据查看与统计

#### 故事13：个人预约统计
**作为** 用户  
**我希望** 能够看到我的预约统计信息  
**以便** 了解我的使用情况  

**验收标准：**
- ✅ 我可以看到总预约次数
- ✅ 我可以看到待确认预约数量
- ✅ 我可以看到已确认预约数量
- ✅ 我可以看到已取消预约数量
- ✅ 统计信息实时更新

#### 故事14：系统整体统计
**作为** 管理员  
**我希望** 能够查看系统的整体使用统计  
**以便** 了解系统运行状况  

**验收标准：**
- ✅ 我可以看到总用户数量
- ✅ 我可以看到总自习室数量
- ✅ 我可以看到总预约数量
- ✅ 我可以看到不同时间段的预约分布
- ✅ 我可以导出统计报表

---

### 🔍 搜索与筛选

#### 故事15：搜索功能
**作为** 用户  
**我希望** 能够搜索特定的自习室或预约  
**以便** 快速找到我需要的信息  

**验收标准：**
- ✅ 我可以按自习室名称搜索
- ✅ 我可以按位置搜索自习室
- ✅ 管理员可以搜索用户名或预约信息
- ✅ 搜索结果高亮显示匹配内容
- ✅ 支持模糊搜索

#### 故事16：预约筛选
**作为** 管理员  
**我希望** 能够按不同条件筛选预约  
**以便** 提高工作效率  

**验收标准：**
- ✅ 我可以按预约状态筛选
- ✅ 我可以按预约日期范围筛选
- ✅ 我可以按自习室筛选
- ✅ 我可以按用户类型筛选
- ✅ 多个筛选条件可以组合使用

---

### 📱 用户体验

#### 故事17：响应式设计
**作为** 用户  
**我希望** 能够在不同设备上正常使用系统  
**以便** 随时随地进行预约操作  

**验收标准：**
- ✅ 系统在桌面浏览器上正常显示
- ✅ 系统在平板设备上适配良好
- ✅ 系统在手机上可以正常使用
- ✅ 按钮和链接在触屏设备上易于点击
- ✅ 文字在小屏幕上仍然清晰可读

#### 故事18：用户友好的界面
**作为** 用户  
**我希望** 系统界面直观易用  
**以便** 快速完成操作  

**验收标准：**
- ✅ 导航菜单清晰明了
- ✅ 重要操作有明显的视觉提示
- ✅ 错误信息清楚易懂
- ✅ 成功操作有确认反馈
- ✅ 表单验证提示友好

---

### 🛡️ 安全与权限

#### 故事19：权限控制
**作为** 系统管理员  
**我希望** 确保用户只能访问被授权的功能  
**以便** 保护系统安全  

**验收标准：**
- ✅ 未登录用户只能查看公开信息
- ✅ 普通用户只能管理自己的预约
- ✅ 管理员可以访问所有管理功能
- ✅ 跨权限访问被正确阻止
- ✅ 敏感操作需要二次确认

#### 故事20：数据验证
**作为** 系统  
**我需要** 验证所有用户输入  
**以便** 确保数据的准确性和安全性  

**验收标准：**
- ✅ 预约日期不能是过去时间
- ✅ 参与人数不能超过房间容量
- ✅ 相同时间段不能重复预约
- ✅ 表单字段格式验证
- ✅ 文件上传安全检查

---

## 系统架构信息

### 技术栈
- **后端框架**: Django 4.2.7
- **数据库**: SQLite (开发) / MySQL (生产)
- **API框架**: Django REST Framework
- **前端**: HTML + CSS + JavaScript (Bootstrap)
- **认证**: Django内置认证系统

### 主要应用模块
- **accounts**: 用户管理系统
- **rooms**: 自习室管理
- **bookings**: 预约管理
- **test_dashboard**: 测试面板

### 数据模型
- **User**: 用户模型（学生、教师、管理员）
- **StudyRoom**: 自习室模型
- **TimeSlot**: 时间段模型
- **Booking**: 预约模型
- **BookingHistory**: 预约历史记录

---

## 部署与测试

### 测试账号
```
学生账号：student1 / testpass123
教师账号：teacher1 / testpass123
管理员：通过Django命令创建超级用户
```

### 示例数据
系统包含完整的示例数据生成脚本(`populate_data.py`)，包括：
- 7个时间段（从早8点到晚10点）
- 6个不同类型的自习室
- 测试用户账号
- 预约记录示例

这个用户故事文档全面描述了图书馆座位预约管理系统的功能需求和用户体验，为系统的进一步开发和优化提供了清晰的指导。 
