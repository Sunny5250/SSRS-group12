# 自习室预约系统用户故事 - 扩展版本
**版本**: v1.1  
**日期**: 2025-03-15  
**状态**: 需求扩展

## 项目概述
在基础用户管理功能基础上，增加用户类型区分和个人信息管理功能。

## 用户角色定义
- **学生**: 系统的主要使用者，可以预约自习室
- **教师**: 教学人员，具有特殊权限
- **管理员**: 系统管理人员，具有最高权限

## 核心用户故事

### 1. 用户注册（增强版）
**作为** 一名新用户  
**我希望** 能够注册账户并选择用户类型  
**以便** 根据我的身份使用相应功能  

**验收标准**:
- 用户可以输入用户名、密码和邮箱
- 用户可以选择身份类型（学生/教师/管理员）
- 可以选择性填写手机号
- 注册成功后自动登录

### 2. 用户登录
**作为** 一名注册用户  
**我希望** 能够登录系统  
**以便** 访问对应权限的功能  

**验收标准**:
- 用户可以使用用户名和密码登录
- 登录成功后根据用户类型跳转到相应页面
- 登录失败显示错误消息

### 3. 个人资料管理
**作为** 一名已登录用户  
**我希望** 能够查看和编辑个人资料  
**以便** 保持信息的准确性  

**验收标准**:
- 用户可以查看个人基本信息
- 用户可以编辑姓名、邮箱、手机号等信息
- 学生可以填写学号，教师可以填写工号
- 保存成功后显示确认消息

### 4. 用户类型识别
**作为** 系统  
**我需要** 能够识别不同类型的用户  
**以便** 提供差异化的功能和权限  

**验收标准**:
- 系统能够区分学生、教师、管理员
- 不同用户类型显示不同的界面元素
- 权限控制基于用户类型

### 5. 用户登出
**作为** 一名已登录用户  
**我希望** 能够安全登出  
**以便** 保护我的账户安全  

**验收标准**:
- 用户可以点击登出按钮
- 登出后清除登录状态
- 跳转到登录页面

## 技术需求
- Django自定义用户模型
- 用户类型字段和权限管理
- 表单验证和数据处理
- 响应式页面设计

## 数据模型
- 扩展User模型，增加user_type、phone、student_id字段
- 支持头像上传功能
- 时间戳字段记录创建和更新时间

## 优先级
- P0: 用户类型区分、注册登录
- P1: 个人资料管理
- P2: 头像上传功能

## 变更记录
- 新增用户类型选择功能
- 新增个人资料管理页面
- 增强注册表单字段
- 优化用户体验流程 