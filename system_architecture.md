# 图书馆座位预约管理系统架构图

```
+-----------------------------------------------------------------------------------------------------------+
|                                        用户层 (User Layer)                                                 |
|                                                                                                           |
|  +----------------+    +---------------+    +------------------+    +------------------+                  |
|  |    学生用户     |    |    教师用户    |    |     管理员用户     |    |     游客访问      |                  |
|  | (Student User) |    | (Teacher User)|    | (Admin User)     |    | (Guest Access)   |                  |
|  +-------+--------+    +-------+-------+    +--------+---------+    +--------+---------+                  |
|          |                     |                     |                       |                             |
+----------|---------------------|---------------------|------------------------|-----------------------------+
           |                     |                     |                        |
           v                     v                     v                        v
+-----------------------------------------------------------------------------------------------------------+
|                                       表示层 (Presentation Layer)                                          |
|                                                                                                           |
|  +-------------------------------------+    +-------------------------------------+                        |
|  |           Web 浏览器界面             |    |              API 接口               |                        |
|  |      (Web Browser Interface)        |    |           (API Interface)          |                        |
|  |                                     |    |                                     |                        |
|  | +---------------+ +--------------+  |    | +---------------+ +---------------+ |                        |
|  | | HTML Templates | | Static Files |  |    | |   REST API    | |  JSON Data    | |                        |
|  | +---------------+ +--------------+  |    | +---------------+ +---------------+ |                        |
|  +-------------------------------------+    +-------------------------------------+                        |
|                                                                                                           |
+-----------------------------------------------------------------------------------------------------------+
                                               |
                                               v
+-----------------------------------------------------------------------------------------------------------+
|                                        应用层 (Application Layer)                                          |
|                                                                                                           |
|  +---------------------+    +---------------------+    +---------------------+    +--------------------+   |
|  |    账户管理模块      |    |    自习室管理模块     |    |      预约管理模块     |    |     测试面板模块     |   |
|  | (Accounts Module)   |    |   (Rooms Module)    |    |  (Bookings Module)   |    | (Test Dashboard)   |   |
|  |                     |    |                     |    |                      |    |                    |   |
|  | • 用户注册           |    | • 自习室列表         |    | • 创建预约            |    | • 性能测试           |   |
|  | • 用户登录           |    | • 自习室详情         |    | • 预约列表            |    | • 负载测试           |   |
|  | • 用户资料管理       |    | • 自习室搜索         |    | • 预约详情            |    | • 测试报告           |   |
|  | • 权限控制           |    | • 设施管理           |    | • 取消预约            |    | • 系统监控           |   |
|  +---------------------+    +---------------------+    +---------------------+    +--------------------+   |
|                                                                                                           |
+-----------------------------------------------------------------------------------------------------------+
                                               |
                                               v
+-----------------------------------------------------------------------------------------------------------+
|                                       业务逻辑层 (Business Logic Layer)                                     |
|                                                                                                           |
|  +-------------------+    +-------------------+    +-------------------+    +-------------------+          |
|  |      视图 (Views)   |    |    表单 (Forms)    |    |   API视图 (APIs)   |    |   服务 (Services)  |          |
|  |                   |    |                   |    |                   |    |                   |          |
|  | • RegisterView    |    | • UserCreationForm|    | • BookingAPIView  |    | • 验证服务          |          |
|  | • ProfileView     |    | • RoomFilterForm  |    | • RoomAPIView     |    | • 邮件服务          |          |
|  | • LoginView       |    | • BookingForm     |    | • UserAPIView     |    | • 通知服务          |          |
|  | • RoomListView    |    |                   |    |                   |    |                   |          |
|  +-------------------+    +-------------------+    +-------------------+    +-------------------+          |
|                                                                                                           |
+-----------------------------------------------------------------------------------------------------------+
                                               |
                                               v
+-----------------------------------------------------------------------------------------------------------+
|                                       数据访问层 (Data Access Layer)                                        |
|                                                                                                           |
|  +-------------------+    +-------------------+    +-------------------+    +-------------------+          |
|  |   模型 (Models)    |    |  查询集 (Queries)  |    | 序列化器(Serializers)|   | 数据库接口(DB APIs) |          |
|  |                   |    |                   |    |                   |    |                   |          |
|  | • User            |    | • ORM查询         |    | • UserSerializer  |    | • Django ORM      |          |
|  | • StudyRoom       |    | • 过滤器          |    | • RoomSerializer  |    | • 原始SQL         |          |
|  | • TimeSlot        |    | • 分页            |    | • BookingSerializer|    |                   |          |
|  | • Booking         |    |                   |    |                   |    |                   |          |
|  | • BookingHistory  |    |                   |    |                   |    |                   |          |
|  +-------------------+    +-------------------+    +-------------------+    +-------------------+          |
|                                                                                                           |
+-----------------------------------------------------------------------------------------------------------+
                                               |
                                               v
+-----------------------------------------------------------------------------------------------------------+
|                                        数据存储层 (Data Storage Layer)                                      |
|                                                                                                           |
|  +----------------------+          +----------------------+          +----------------------+              |
|  |       SQLite数据库    |          |       MySQL数据库     |          |       静态文件存储     |              |
|  |    (开发环境使用)     |          |     (生产环境使用)     |          |    (Static Storage)  |              |
|  |                      |          |                      |          |                      |              |
|  | • 用户数据            |          | • 用户数据            |          | • CSS/JS文件         |              |
|  | • 自习室数据          |          | • 自习室数据          |          | • 图片资源           |              |
|  | • 预约数据            |          | • 预约数据            |          | • 用户上传文件        |              |
|  | • 配置数据            |          | • 配置数据            |          |                      |              |
|  +----------------------+          +----------------------+          +----------------------+              |
|                                                                                                           |
+-----------------------------------------------------------------------------------------------------------+
                                               |
                                               v
+-----------------------------------------------------------------------------------------------------------+
|                                        测试与部署层 (Testing & Deployment Layer)                             |
|                                                                                                           |
|  +--------------------+    +--------------------+    +--------------------+    +--------------------+      |
|  |    单元测试         |    |     集成测试        |    |     性能测试        |    |     部署工具        |      |
|  |   (Unit Tests)     |    | (Integration Tests)|    | (Performance Tests)|    | (Deployment Tools) |      |
|  |                    |    |                    |    |                    |    |                    |      |
|  | • 模型测试          |    | • API测试          |    | • 负载测试          |    | • Gunicorn        |      |
|  | • 视图测试          |    | • 流程测试          |    | • 压力测试          |    | • Whitenoise      |      |
|  | • 表单测试          |    | • 功能测试          |    | • 并发测试          |    | • Docker          |      |
|  +--------------------+    +--------------------+    +--------------------+    +--------------------+      |
|                                                                                                           |
+-----------------------------------------------------------------------------------------------------------+
```

## 系统架构说明

### 1. 用户层 (User Layer)
用户层包括系统的所有用户类型，包括学生、教师、管理员和游客。每种用户类型具有不同的权限和功能访问级别。

### 2. 表示层 (Presentation Layer)
表示层负责与用户交互，包括：
- **Web浏览器界面**：基于Bootstrap的响应式HTML模板
- **API接口**：REST API为移动应用或外部系统提供数据交互能力

### 3. 应用层 (Application Layer)
应用层包含系统的主要功能模块：
- **账户管理模块 (accounts)**：处理用户注册、认证和资料管理
- **自习室管理模块 (rooms)**：管理自习室信息、设施和可用性
- **预约管理模块 (bookings)**：处理预约创建、查询、取消等操作
- **测试面板模块 (test_dashboard)**：提供系统测试和监控功能

### 4. 业务逻辑层 (Business Logic Layer)
业务逻辑层实现系统的核心功能：
- **视图 (Views)**：处理HTTP请求并返回响应
- **表单 (Forms)**：验证和处理用户输入
- **API视图 (APIs)**：提供RESTful API接口
- **服务 (Services)**：提供可复用的业务逻辑功能

### 5. 数据访问层 (Data Access Layer)
数据访问层负责与数据库交互：
- **模型 (Models)**：定义数据结构和关系
- **查询集 (Queries)**：封装数据库查询逻辑
- **序列化器 (Serializers)**：转换数据格式
- **数据库接口 (DB APIs)**：提供数据库访问方法

### 6. 数据存储层 (Data Storage Layer)
数据存储层负责持久化数据：
- **SQLite数据库**：开发环境使用
- **MySQL数据库**：生产环境使用
- **静态文件存储**：存储CSS、JS、图片等静态资源

### 7. 测试与部署层 (Testing & Deployment Layer)
测试与部署层提供质量保证和系统部署功能：
- **单元测试**：测试独立组件功能
- **集成测试**：测试组件间交互
- **性能测试**：测试系统性能和负载能力
- **部署工具**：用于系统部署和运维

## 技术栈
- **后端框架**: Django 4.2.7
- **数据库**: SQLite (开发) / MySQL (生产)
- **API框架**: Django REST Framework 3.14.0
- **前端**: HTML + CSS + JavaScript (Bootstrap)
- **认证**: Django内置认证系统
- **部署**: Gunicorn + Whitenoise
- **测试**: Pytest + Django测试框架 